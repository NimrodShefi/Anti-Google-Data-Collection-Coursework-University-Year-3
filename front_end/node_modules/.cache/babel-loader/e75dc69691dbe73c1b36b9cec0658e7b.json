{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\c1989618\\\\Documents\\\\term_1\\\\coursework\\\\project\\\\front_end\\\\src\\\\components\\\\Login.js\";\nimport './Login.css';\nimport React, { Component } from 'react';\nimport GoogleLogin from 'react-google-login';\nimport { sendLoginData } from '../api/sendHttpRequests';\nimport { Link, Navigate } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Login extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.failedResponseGoogle = response => {\n      const element = document.getElementById('message');\n      element.innerHTML = 'Login failed! Please try again later';\n    };\n\n    this.successfulResponseGoogle = response => {\n      try {\n        const cookies = new Cookies();\n        var sessionData = sendLoginData('http://localhost:3001/user_login', response.tokenId);\n        sessionData.then(response => {\n          console.log(response);\n          return response.json();\n        }).then(parsedData => {\n          cookies.set('session-data', parsedData, {\n            path: '/'\n          });\n          document.getElementById('navigate').click();\n        });\n      } catch (error) {\n        const element = document.getElementById('message');\n        element.innerHTML = 'Login failed! Please try again later';\n        console.error(error);\n      }\n    };\n  }\n\n  render() {\n    const cookies = new Cookies();\n\n    try {\n      // if there is no error, the cookie exists, it means that the user is already logged in,\n      // and he should be taken to the home page, rather then be asked if he wants to re-log in\n      var tryCookie = cookies.get('session-data').sessionId;\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this); // if there is an error, it means that the cookie was not found, \n      // and thereofre the user is not logged in, and before being allowed to use the app, he needs to log in\n    } catch (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"appDetails\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Data Protector\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"By logging in to your Google Account here, you are able to provide yourself with increased privacy from Google's alogirthm by letting us visit many website under your name. To ensure that you are completely comfortable in using our services, you are able to opt out of us loading some of the webistes on the list if you don't want.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 35\n            }, this), \"In addition to that, to ensure your privacy, at the end of every day, all the data stored about you in our systems will be deleted\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"appLogin\",\n          \"aria-label\": \"login section\",\n          children: [/*#__PURE__*/_jsxDEV(GoogleLogin, {\n            clientId: \"919197055743-cr391ut1ptdgkaj5e06tb8icgi1477di.apps.googleusercontent.com\",\n            buttonText: \"Login\",\n            onSuccess: this.successfulResponseGoogle,\n            onFailure: this.failedResponseGoogle,\n            cookiePolicy: 'single_host_origin'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"message\",\n            \"aria-label\": \"login status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            id: \"navigate\",\n            to: \"/home\",\n            hidden: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\nexport default Login; // Used this youtube tutorial to help me create the google login:\n// https://www.youtube.com/watch?v=-OgU5EAcQmo","map":{"version":3,"sources":["C:/Users/c1989618/Documents/term_1/coursework/project/front_end/src/components/Login.js"],"names":["React","Component","GoogleLogin","sendLoginData","Link","Navigate","Cookies","Login","failedResponseGoogle","response","element","document","getElementById","innerHTML","successfulResponseGoogle","cookies","sessionData","tokenId","then","console","log","json","parsedData","set","path","click","error","render","tryCookie","get","sessionId"],"mappings":"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","sourcesContent":["import './Login.css';\r\nimport React, { Component } from 'react';\r\nimport GoogleLogin from 'react-google-login';\r\nimport { sendLoginData } from '../api/sendHttpRequests';\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport Cookies from 'universal-cookie';\r\n\r\nexport class Login extends Component {\r\n\r\n    failedResponseGoogle = (response) => {\r\n        const element = document.getElementById('message');\r\n        element.innerHTML = 'Login failed! Please try again later';\r\n    }\r\n\r\n    successfulResponseGoogle = (response) => {\r\n        try {\r\n            const cookies = new Cookies();\r\n            var sessionData = sendLoginData('http://localhost:3001/user_login', response.tokenId);\r\n            sessionData\r\n                .then(response => {\r\n                    console.log(response);\r\n                    return response.json();\r\n                })\r\n                .then(parsedData => {\r\n                    cookies.set('session-data', parsedData, { path: '/' });\r\n                    document.getElementById('navigate').click();\r\n                }); \r\n\r\n        } catch (error) {\r\n            const element = document.getElementById('message');\r\n            element.innerHTML = 'Login failed! Please try again later';\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const cookies = new Cookies();\r\n        try {\r\n            // if there is no error, the cookie exists, it means that the user is already logged in,\r\n            // and he should be taken to the home page, rather then be asked if he wants to re-log in\r\n            var tryCookie = cookies.get('session-data').sessionId;\r\n            return (\r\n                <Navigate to='/home' />\r\n            )\r\n        // if there is an error, it means that the cookie was not found, \r\n        // and thereofre the user is not logged in, and before being allowed to use the app, he needs to log in\r\n        } catch (error) {\r\n            return (\r\n                <div>\r\n                    <div id='appDetails'>\r\n                        <h1>Data Protector</h1>\r\n                        <p>By logging in to your Google Account here, you are able to provide yourself with increased privacy \r\n                            from Google's alogirthm by letting us visit many website under your name.\r\n                            To ensure that you are completely comfortable in using our services, \r\n                            you are able to opt out of us loading some of the webistes on the list if you don't want.\r\n                            <br /><br />\r\n                            In addition to that, to ensure your privacy, at the end of every day, \r\n                            all the data stored about you in our systems will be deleted</p>\r\n                    </div>\r\n\r\n                    <div id='appLogin' aria-label='login section'>\r\n                        <GoogleLogin\r\n                            clientId='919197055743-cr391ut1ptdgkaj5e06tb8icgi1477di.apps.googleusercontent.com'\r\n                            buttonText='Login'\r\n                            onSuccess={this.successfulResponseGoogle}\r\n                            onFailure={this.failedResponseGoogle}\r\n                            cookiePolicy={'single_host_origin'}\r\n                        />\r\n                        <p id='message' aria-label='login status'></p>\r\n                        <Link id='navigate' to='/home' hidden />\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default Login;\r\n\r\n// Used this youtube tutorial to help me create the google login:\r\n// https://www.youtube.com/watch?v=-OgU5EAcQmo"]},"metadata":{},"sourceType":"module"}